{"ast":null,"code":"var _jsxFileName = \"/home/rafael/Projetos/sd-05-recipes-app-5/src/components/SearchBar.jsx\";\nimport React from 'react';\nimport { useContext, useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Context from '../context/Context';\nimport { getFoodByName, getFoodByLetter, getFoodByIngredients } from '../Services/foodAPI';\nimport { getDrinksByName, getDrinksByLetter, getDrinksByIngredients } from '../Services/drinkAPI';\n\nconst GetDrinkApi = (target, input, save, history) => {\n  switch (target) {\n    case 'name':\n      return getDrinksByName(input).then(data => {\n        if (!data.drinks) {\n          return alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n        } else if (data.drinks.length === 1) {\n          history.push(`/bebidas/${data.drinks[0].idDrink}`);\n        }\n\n        return save(data.drinks);\n      });\n\n    case 'ing':\n      return getDrinksByIngredients(input).then(data => save(data.drinks));\n\n    case 'letter':\n      return getDrinksByLetter(input).then(data => save(data.drinks));\n\n    default:\n      return target;\n  }\n};\n\nconst GetFoodApi = (target, input, save, history) => {\n  switch (target) {\n    case 'name':\n      return getFoodByName(input).then(data => {\n        if (!data.meals) {\n          return alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n        } else if (data.meals.length === 1) {\n          history.push(`/comidas/${data.meals[0].idMeal}`);\n        }\n\n        return save(data.meals);\n      });\n\n    case 'ing':\n      return getFoodByIngredients(input).then(data => save(data.meals));\n\n    case 'letter':\n      return getFoodByLetter(input).then(data => save(data.meals));\n\n    default:\n      return target;\n  }\n};\n\nconst searchBtn = (receitas, target, input, setDrink, setFood, history) => /*#__PURE__*/React.createElement(\"button\", {\n  \"data-testid\": \"exec-search-btn\",\n  className: \"search-btn\",\n  type: \"button\",\n  onClick: () => {\n    if (target === 'letter' && input.length > 1) {\n      return alert('Sua busca deve conter somente 1 (um) caracter');\n    }\n\n    return receitas === 'Comidas' ? GetFoodApi(target, input, setFood, history) : GetDrinkApi(target, input, setDrink, history);\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 3\n  }\n}, \"Buscar\");\n\nconst SearchBar = () => {\n  const [target, setTarget] = useState('name');\n  const [input, setInput] = useState('');\n  const {\n    setFood,\n    setDrink,\n    receitas,\n    setReceitas\n  } = useContext(Context);\n  const history = useHistory();\n  const {\n    location: {\n      pathname\n    }\n  } = useHistory();\n  useEffect(() => {\n    if (pathname === '/bebidas') {\n      setReceitas('Bebidas');\n    } else if (pathname === '/comidas') {\n      setReceitas('Comidas');\n    }\n  }, [pathname]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    \"data-testid\": \"search-input\",\n    onChange: e => setInput(e.target.value),\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    \"data-testid\": \"ingredient-search-radio\",\n    onChange: () => setTarget('ing'),\n    type: \"radio\",\n    id: \"ing\",\n    name: \"target\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"ing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, \"Ingrediente\"), /*#__PURE__*/React.createElement(\"input\", {\n    \"data-testid\": \"name-search-radio\",\n    onChange: () => setTarget('name'),\n    type: \"radio\",\n    id: \"nome\",\n    name: \"target\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"nome\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, \"Nome\"), /*#__PURE__*/React.createElement(\"input\", {\n    \"data-testid\": \"first-letter-search-radio\",\n    onChange: () => setTarget('letter'),\n    type: \"radio\",\n    id: \"letra\",\n    name: \"target\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"letra\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, \"Primeira Letra\")), searchBtn(receitas, target, input, setDrink, setFood, history));\n};\n\nexport default SearchBar;","map":{"version":3,"sources":["/home/rafael/Projetos/sd-05-recipes-app-5/src/components/SearchBar.jsx"],"names":["React","useContext","useState","useEffect","useHistory","Context","getFoodByName","getFoodByLetter","getFoodByIngredients","getDrinksByName","getDrinksByLetter","getDrinksByIngredients","GetDrinkApi","target","input","save","history","then","data","drinks","alert","length","push","idDrink","GetFoodApi","meals","idMeal","searchBtn","receitas","setDrink","setFood","SearchBar","setTarget","setInput","setReceitas","location","pathname","e","value"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useContext, useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Context from '../context/Context';\nimport { getFoodByName, getFoodByLetter, getFoodByIngredients } from '../Services/foodAPI';\nimport { getDrinksByName, getDrinksByLetter, getDrinksByIngredients } from '../Services/drinkAPI';\n\nconst GetDrinkApi = (target, input, save, history) => {\n  switch (target) {\n    case 'name':\n      return getDrinksByName(input).then((data) => {\n        if (!data.drinks) {\n          return alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n        } else if (data.drinks.length === 1) {\n          history.push(`/bebidas/${data.drinks[0].idDrink}`);\n        }\n        return save(data.drinks);\n      });\n    case 'ing':\n      return getDrinksByIngredients(input).then((data) => save(data.drinks));\n\n    case 'letter':\n      return getDrinksByLetter(input).then((data) => save(data.drinks));\n    default:\n      return target;\n  }\n};\n\nconst GetFoodApi = (target, input, save, history) => {\n  switch (target) {\n    case 'name':\n      return getFoodByName(input).then((data) => {\n        if (!data.meals) {\n          return alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n        } else if (data.meals.length === 1) {\n          history.push(`/comidas/${data.meals[0].idMeal}`);\n        }\n        return save(data.meals);\n      });\n    case 'ing':\n      return getFoodByIngredients(input).then((data) => save(data.meals));\n    case 'letter':\n      return getFoodByLetter(input).then((data) => save(data.meals));\n    default:\n      return target;\n  }\n};\nconst searchBtn = (receitas, target, input, setDrink, setFood, history) => (\n  <button\n    data-testid=\"exec-search-btn\"\n    className=\"search-btn\"\n    type=\"button\"\n    onClick={() => {\n      if (target === 'letter' && input.length > 1) {\n        return alert('Sua busca deve conter somente 1 (um) caracter');\n      }\n      return receitas === 'Comidas'\n        ? GetFoodApi(target, input, setFood, history)\n        : GetDrinkApi(target, input, setDrink, history);\n    }}\n  >\n    Buscar\n  </button>\n);\n\nconst SearchBar = () => {\n  const [target, setTarget] = useState('name');\n  const [input, setInput] = useState('');\n  const { setFood, setDrink, receitas, setReceitas } = useContext(Context);\n  const history = useHistory();\n  const { location: { pathname } } = useHistory();\n  useEffect(() => {\n    if (pathname === '/bebidas') {\n      setReceitas('Bebidas');\n    } else if (pathname === '/comidas') {\n      setReceitas('Comidas');\n    }\n  }, [pathname]);\n  return (\n    <div>\n      <input data-testid=\"search-input\" onChange={(e) => setInput(e.target.value)} type=\"text\" />\n      <div>\n        <input\n          data-testid=\"ingredient-search-radio\"\n          onChange={() => setTarget('ing')}\n          type=\"radio\"\n          id=\"ing\"\n          name=\"target\"\n        />\n        <label htmlFor=\"ing\">Ingrediente</label>\n        <input\n          data-testid=\"name-search-radio\"\n          onChange={() => setTarget('name')}\n          type=\"radio\"\n          id=\"nome\"\n          name=\"target\"\n        />\n        <label htmlFor=\"nome\">Nome</label>\n        <input\n          data-testid=\"first-letter-search-radio\"\n          onChange={() => setTarget('letter')}\n          type=\"radio\"\n          id=\"letra\"\n          name=\"target\"\n        />\n        <label htmlFor=\"letra\">Primeira Letra</label>\n      </div>\n      {searchBtn(receitas, target, input, setDrink, setFood, history)}\n    </div>\n  );\n};\n\nexport default SearchBar;\n"]},"metadata":{},"sourceType":"module"}